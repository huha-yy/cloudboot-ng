{{define "terminal"}}
<div class="w-full bg-black rounded-lg border border-slate-800 overflow-hidden font-mono text-sm shadow-inner">
    <!-- Header with macOS-style dots -->
    <div class="flex items-center px-4 py-2 bg-slate-900 border-b border-slate-800">
        <div class="flex space-x-2">
            <div class="w-3 h-3 rounded-full bg-rose-500/20 hover:bg-rose-500 transition-colors cursor-pointer"></div>
            <div class="w-3 h-3 rounded-full bg-amber-500/20 hover:bg-amber-500 transition-colors cursor-pointer"></div>
            <div class="w-3 h-3 rounded-full bg-emerald-500"></div>
        </div>
        <div class="ml-4 text-xs text-slate-500">{{if .Title}}{{.Title}}{{else}}root@cloudboot-core: ~{{end}}</div>
    </div>
    <!-- Log Stream Area -->
    <div id="{{if .ID}}{{.ID}}{{else}}log-container{{end}}"
         class="p-4 h-64 overflow-y-auto scrollbar-thin"
         {{if .JobID}}
         hx-ext="sse"
         sse-connect="/api/stream/logs/{{.JobID}}"
         sse-swap="message"
         hx-swap="beforeend"
         x-data
         x-init="$el.scrollTop = $el.scrollHeight"
         {{end}}>
        {{if .Logs}}
        {{range .Logs}}
        <div class="{{.Class}}">{{.Message}}</div>
        {{end}}
        {{else}}
        <div class="text-emerald-500/90">> Initializing hardware probe...</div>
        <div class="text-slate-300">> Found RAID Controller: LSI MegaRAID SAS 3108</div>
        <div class="text-slate-300">> Scanning physical drives...</div>
        <div class="text-amber-500">> Warning: Battery backup low</div>
        <div class="text-emerald-500">> RAID configuration completed successfully</div>
        {{end}}
    </div>
</div>
{{end}}

{{define "terminal-live"}}
<div class="w-full bg-black rounded-lg border border-slate-800 overflow-hidden font-mono text-sm shadow-inner"
     x-data="{ autoScroll: true }">
    <!-- Header -->
    <div class="flex items-center justify-between px-4 py-2 bg-slate-900 border-b border-slate-800">
        <div class="flex items-center">
            <div class="flex space-x-2">
                <div class="w-3 h-3 rounded-full bg-rose-500/20"></div>
                <div class="w-3 h-3 rounded-full bg-amber-500/20"></div>
                <div class="w-3 h-3 rounded-full bg-emerald-500 animate-pulse"></div>
            </div>
            <div class="ml-4 text-xs text-slate-500">Job: {{.JobID}}</div>
        </div>
        <label class="flex items-center text-xs text-slate-500 cursor-pointer">
            <input type="checkbox" x-model="autoScroll" class="sr-only peer">
            <div class="relative w-8 h-4 bg-slate-700 rounded-full peer-checked:bg-emerald-600 transition-colors">
                <div class="absolute left-0.5 top-0.5 w-3 h-3 bg-white rounded-full transition-transform peer-checked:translate-x-4"></div>
            </div>
            <span class="ml-2">Auto-scroll</span>
        </label>
    </div>
    <!-- Log Area with SSE -->
    <div id="log-{{.JobID}}"
         class="p-4 h-80 overflow-y-auto scrollbar-thin"
         hx-ext="sse"
         sse-connect="/api/stream/logs/{{.JobID}}"
         sse-swap="message"
         hx-swap="beforeend"
         x-effect="if(autoScroll) { $el.scrollTop = $el.scrollHeight }">
    </div>
</div>
{{end}}
