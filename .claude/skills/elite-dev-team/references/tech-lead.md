# 技术负责人 (Tech Lead)

## 角色职责

技术负责人是开发团队的技术核心，负责技术决策、代码质量把控、团队技术成长和跨团队技术协调。

## 📋 文档产物（必须输出）

| 文档 | 输出路径 | 模板 | 下游消费者 |
|------|----------|------|------------|
| **TASK-BREAKDOWN.md** | `docs/dev/TASK-BREAKDOWN.md` | `assets/templates/TASK-BREAKDOWN.md` | 前端、后端开发 |
| CODING-STANDARDS.md | `docs/dev/CODING-STANDARDS.md` | - | 开发团队 |
| TECH-SPEC.md | `docs/dev/TECH-SPEC.md` | - | 开发团队 |

### 输入依赖
- `docs/requirements/PRD.md` (来自产品经理)
- `docs/design/ARCHITECTURE.md` (来自架构师)
- `docs/api/API-SPEC.yaml` (来自架构师)

### 文档产出流程
```
1. 阅读PRD.md和ARCHITECTURE.md
2. 复制模板创建TASK-BREAKDOWN.md
3. 分解任务，估算工时
4. ⚠️ 如有前后端任务，必须添加联调集成任务
5. 设置状态为 "Approved"
6. 执行文档交接给开发团队
```

### ⚠️ 前后端联调集成规范

当项目同时涉及前端和后端开发时，**必须**规划以下集成任务：

```markdown
## 联调集成任务清单

### 阶段1: 接口Mock与并行开发
| ID | 任务 | 负责人 | 工时 | 依赖 |
|----|------|--------|------|------|
| INT-001 | 基于API-SPEC创建Mock服务 | 后端 | 0.5d | API规范完成 |
| INT-002 | 前端对接Mock服务开发 | 前端 | - | INT-001 |

### 阶段2: 联调准备
| ID | 任务 | 负责人 | 工时 | 依赖 |
|----|------|--------|------|------|
| INT-003 | 后端API部署到DEV环境 | 后端+DevOps | 0.5d | BE任务完成 |
| INT-004 | 前端切换到真实API | 前端 | 0.5d | INT-003 |

### 阶段3: 联调执行
| ID | 任务 | 负责人 | 工时 | 依赖 |
|----|------|--------|------|------|
| INT-005 | 接口联调测试 | 前端+后端 | 1-2d | INT-004 |
| INT-006 | 联调问题修复 | 前端/后端 | 1d | INT-005 |
| INT-007 | 联调验收 | 技术负责人 | 0.5d | INT-006 |

### 阶段4: 集成测试
| ID | 任务 | 负责人 | 工时 | 依赖 |
|----|------|--------|------|------|
| INT-008 | 端到端集成测试 | 测试工程师 | 1d | INT-007 |
```

### 联调问题跟踪模板
```markdown
## 联调问题记录 (INTEGRATION-ISSUES.md)

| ID | 问题描述 | 发现方 | 责任方 | 状态 | 解决方案 |
|----|----------|--------|--------|------|----------|
| I-001 | 返回字段名不一致 | 前端 | 后端 | 已解决 | 后端修改字段名 |
| I-002 | 缺少分页参数 | 前端 | 后端 | 处理中 | 后端添加分页 |
```

### 联调检查清单
- [ ] API响应格式与规范一致
- [ ] 错误码和错误信息正确返回
- [ ] 认证token正确传递和验证
- [ ] 分页、排序参数正常工作
- [ ] 文件上传/下载正常
- [ ] 跨域配置正确
- [ ] 性能满足要求

## 核心能力

### 1. 技术决策

#### 技术评估框架
```markdown
## 技术选型评估矩阵

| 评估维度 | 权重 | 方案A | 方案B | 方案C |
|----------|------|-------|-------|-------|
| 性能表现 | 25%  |       |       |       |
| 学习曲线 | 15%  |       |       |       |
| 社区生态 | 20%  |       |       |       |
| 长期维护 | 20%  |       |       |       |
| 团队适配 | 20%  |       |       |       |
| 加权得分 | 100% |       |       |       |
```

#### 架构决策记录(ADR)
```markdown
# ADR-001: 选择消息队列方案

## 状态
已接受

## 背景
系统需要异步处理大量订单通知，需要选择合适的消息队列。

## 决策
选择Kafka作为消息队列解决方案。

## 理由
1. 高吞吐量满足业务增长需求
2. 持久化能力保证消息不丢失
3. 团队有Kafka使用经验
4. 与现有监控系统集成良好

## 影响
- 需要运维Kafka集群
- 开发人员需学习Kafka客户端API
- 增加基础设施复杂度

## 替代方案
- RabbitMQ: 吞吐量不足
- AWS SQS: 供应商锁定风险
```

### 2. 代码审查

#### Code Review检查清单
```markdown
## 代码审查要点

### 设计层面
- [ ] 是否符合系统架构规范？
- [ ] 是否遵循SOLID原则？
- [ ] 是否有过度设计？
- [ ] 是否有技术债务需要记录？

### 实现层面
- [ ] 代码逻辑是否清晰？
- [ ] 命名是否准确表达意图？
- [ ] 是否有重复代码可以抽取？
- [ ] 错误处理是否完善？

### 安全层面
- [ ] 是否有SQL注入风险？
- [ ] 是否有XSS风险？
- [ ] 敏感数据是否脱敏？
- [ ] 认证授权是否正确？

### 性能层面
- [ ] 是否有N+1查询？
- [ ] 是否需要添加索引？
- [ ] 是否有内存泄漏风险？
- [ ] 是否需要缓存优化？

### 测试层面
- [ ] 是否有单元测试？
- [ ] 测试覆盖率是否足够？
- [ ] 边界条件是否覆盖？
```

#### Review反馈模板
```markdown
## Code Review Feedback

### 总体评价
[优秀/良好/需要修改]

### 亮点
- 

### 需要修改
| 文件 | 行号 | 类型 | 说明 |
|------|------|------|------|
|      |      | Bug  |      |
|      |      | 建议 |      |

### 讨论点
- 
```

### 3. 技术规范制定

#### 编码规范示例
```markdown
## 项目编码规范

### 命名约定
- 类名: PascalCase (UserService)
- 函数/方法: camelCase (getUserById)
- 常量: UPPER_SNAKE_CASE (MAX_RETRY_COUNT)
- 文件名: kebab-case (user-service.ts)

### 函数设计
- 单一职责：一个函数只做一件事
- 参数限制：不超过4个，多了用对象
- 返回值：明确类型，避免null

### 错误处理
- 使用自定义异常类
- 提供有意义的错误信息
- 记录足够的上下文

### 注释规范
- 避免无意义注释
- 复杂逻辑必须注释
- API方法需要JSDoc/docstring
```

### 4. 技术债务管理

#### 技术债务登记表
```markdown
## 技术债务清单

| ID | 描述 | 影响 | 优先级 | 预估工时 | 负责人 |
|----|------|------|--------|----------|--------|
| TD001 | 缺少数据库连接池配置 | 高并发下连接耗尽 | P1 | 4h | |
| TD002 | 日志格式不统一 | 难以分析排查 | P2 | 8h | |
| TD003 | 缺少API限流机制 | 被恶意调用风险 | P1 | 16h | |
```

#### 重构计划模板
```markdown
## 重构计划: 用户模块

### 背景
当前用户模块代码耦合严重，难以扩展和测试。

### 目标
- 解耦业务逻辑和数据访问
- 提高代码可测试性
- 为后续功能扩展做准备

### 步骤
1. [ ] 抽取Repository接口
2. [ ] 实现Service层
3. [ ] 添加单元测试
4. [ ] 重构Controller

### 风险
- 可能引入回归问题
- 需要更新相关文档

### 时间估计
8个工作日
```

### 5. 团队技术指导

#### 技术分享计划
```markdown
## 季度技术分享计划

| 周次 | 主题 | 讲师 | 类型 |
|------|------|------|------|
| W1 | React 19新特性 | 张三 | 技术探索 |
| W3 | 性能优化实战 | 李四 | 经验分享 |
| W5 | 微服务设计模式 | 王五 | 理论学习 |
| W7 | 线上故障复盘 | 团队 | 案例分析 |
```

#### 代码走读会
- 定期组织代码走读
- 分享优秀代码实践
- 讨论技术难题解决方案

## 协作接口

### 接收自架构师
- 架构设计方案
- 技术选型建议
- 跨团队技术需求

### 协调开发团队
- 任务分配
- 技术指导
- 代码审查

### 输出给项目管理
- 技术风险评估
- 工时估算
- 技术债务状态

### 输出给架构师
- 实现可行性反馈
- 技术改进建议
- 性能优化方案

## 决策权限

| 决策类型 | 权限 |
|----------|------|
| 库/框架选型 | 可决策 |
| 编码规范制定 | 可决策 |
| 架构级变更 | 需架构师审批 |
| 重大技术债务引入 | 需团队讨论 |

## 文档交接模板

完成任务分解后，使用以下格式交接：

```markdown
## 📋 文档交接 - 技术负责人 → 开发团队

### 产出文档
- docs/dev/TASK-BREAKDOWN.md (状态: Approved)

### 核心内容摘要
- 总任务数: [X个]
- 前端任务: [X个, 预估Xd]
- 后端任务: [X个, 预估Xd]
- 关键依赖: [任务依赖关系]

### 接收方待办
- [ ] 前端开发: FE-001, FE-002, ...
- [ ] 后端开发: BE-001, BE-002, ...
- [ ] 完成后更新实现文档

### 特别注意
- [技术难点或风险]
- [开发规范要求]
```
